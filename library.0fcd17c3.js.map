{"mappings":"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","sources":["src/library-index.js","src/script/onOperCardInLibrary.js","src/script/modal_developer-library.js"],"sourcesContent":["import './script/refs';\nimport './script/localStorage';\nimport './script/galleryInLibrary';\nimport './script/onClickAddToLibrary';\nimport './script/onOperCardInLibrary';\nimport './script/modal_developer-library';\n// import './script/auth-modal-library';\n","import { MovieApi } from './fetchFilms';\nimport { refs } from './refs';\nimport { movieCard } from './movieCard';\nimport { alertNoTrailer } from './alerts';\nimport * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/dist/basicLightbox.min.css';\n\nconst movieApi = new MovieApi();\nlet youtubeKey = '';\n\nconst createMarkup = async id => {\n  refs.loader.classList.remove('is-hidden');\n  clearCard();\n  movieApi.id = id;\n  try {\n    const { data } = await movieApi.fetchMovieById();\n\n    refs.modalContainer.insertAdjacentHTML('beforeend', movieCard(data));\n    refs.closeModalFilmBtn.addEventListener('click', closeModal);\n    setTimeout(() => {\n      const btnOpenTrailer = document.querySelector('.js-trailer');\n      btnOpenTrailer.addEventListener('click', onOpenTrailerModal);\n    }, 0);\n  } catch (err) {\n    console.log(err);\n  }\n\n  refs.modal.classList.remove('is-hidden');\n  refs.loader.classList.add('is-hidden');\n};\n\nconst onGalleryContainerClickInLibrary = e => {\n  e.preventDefault();\n  if (e.target.nodeName !== 'IMG') {\n    return;\n  }\n\n  refs.backdrop.classList.remove('is-hidden');\n  document.body.classList.add('modal-is-open');\n  createMarkup(e.target.id);\n};\n\nfunction createYoutubeUrl(data) {\n  const { results } = data;\n  results.forEach(obj => {\n    if (obj.name.includes('Official Trailer')) {\n      youtubeKey = obj.key;\n    }\n  });\n}\nconst onOpenTrailerModal = async () => {\n  try {\n    const { data } = await movieApi.fetchMovieByIdForTrailer();\n    createYoutubeUrl(data);\n    if (!youtubeKey) {\n      alertNoTrailer();\n      return;\n    }\n  } catch (err) {\n    console.log(err);\n  }\n\n  const openTrailer = basicLightbox.create(`\n        <iframe src='https://www.youtube.com/embed/${youtubeKey}'frameborder=\"0\" allowfullscreen class=\"trailer_video\" width=\"80%\" height=\"80%\"></iframe>`);\n  openTrailer.show();\n};\n\nfunction clearCard() {\n  refs.modalContainer.innerHTML = '';\n}\n\nfunction onClickBackdrop(event) {\n  if (event.currentTarget === event.target) {\n    closeModal();\n  }\n}\nfunction onClickEsc(event) {\n  if (event.code === 'Escape') {\n    closeModal();\n  }\n}\nfunction closeModal() {\n  refs.modal.classList.add('is-hidden');\n  refs.backdrop.classList.add('is-hidden');\n  document.body.classList.remove('modal-is-open');\n  refs.modalContainer.innerHTML = '';\n  youtubeKey = '';\n  refs.closeModalFilmBtn.removeEventListener('click', closeModal);\n}\n\nrefs.backdrop.addEventListener('click', onClickBackdrop);\ndocument.addEventListener('keydown', onClickEsc);\n\nrefs.galleryLibrary.addEventListener('click', onGalleryContainerClickInLibrary);\n","import Swiper from '/node_modules/swiper/swiper-bundle.min.js';\nimport '/node_modules/swiper/swiper-bundle.min.css';\n\nconst footerSpan = document.querySelector('.footer__link');\nconst backdrop = document.querySelector('.team-backdrop');\nconst body = document.querySelector('body');\n\nlet swiper = '';\nconst desktop = 1200;\nlet windowWidth = document.documentElement.clientWidth;\n\nfunction openModalHandle() {\n  backdrop.classList.remove('is-hidden');\n  body.classList.add('stop-scroll');\n\n  if (windowWidth < desktop) {\n    swiper = new Swiper('.team-modal', {\n      effect: 'cards',\n      grabCursor: true,\n    });\n    return;\n  }\n  if (windowWidth >= desktop) {\n    swiper = new Swiper('.team-modal', {\n      effect: 'flip',\n      grabCursor: true,\n      navigation: {\n        nextEl: '.swiper-button-next',\n        prevEl: '.swiper-button-prev',\n      },\n    });\n    return;\n  }\n}\n\nfunction closeModalHandle({ target }) {\n  if (\n    target.nodeName !== 'IMG' &&\n    target.classList[0] !== 'swiper-button-next' &&\n    target.classList[0] !== 'swiper-button-prev'\n  ) {\n    backdrop.classList.add('is-hidden');\n    body.classList.remove('stop-scroll');\n    swiper.destroy(true, true);\n  }\n}\n\nfunction escCloseHandle(e) {\n  if (backdrop.classList.contains('is-hidden')) {\n    return;\n  }\n  if (!backdrop.classList.contains('is-hidden')) {\n    if (e.key !== 'Escape') {\n      return;\n    }\n    backdrop.classList.add('is-hidden');\n    body.classList.remove('stop-scroll');\n    swiper.destroy(true, true);\n  }\n}\n\nfooterSpan.addEventListener('click', openModalHandle);\nbackdrop.addEventListener('click', closeModalHandle);\ndocument.addEventListener('keydown', escCloseHandle);\n"],"names":["parcelRequire","$bpxeT","$a221c18c36fe1697$var$movieApi","$BRQVA","MovieApi","$a221c18c36fe1697$var$youtubeKey","$a221c18c36fe1697$var$createMarkup","$parcel$interopDefault","$2TvXO","mark","_callee","id","data","$lyT68","refs","loader","classList","remove","modalContainer","innerHTML","fetchMovieById","_ctx","sent","insertAdjacentHTML","$jLvu0","movieCard","closeModalFilmBtn","addEventListener","$a221c18c36fe1697$var$closeModal","setTimeout","document","querySelector","$a221c18c36fe1697$var$onOpenTrailerModal","console","log","t0","modal","add","$a221c18c36fe1697$var$createYoutubeUrl","results","forEach","obj","name","includes","key","fetchMovieByIdForTrailer","$1oqgH","alertNoTrailer","$dyT35","create","concat","show","backdrop","body","removeEventListener","event","currentTarget","target","code","galleryLibrary","e","preventDefault","nodeName","$6Bava","$00c7b7b781f0df5e$var$footerSpan","$00c7b7b781f0df5e$var$backdrop","$00c7b7b781f0df5e$var$body","$00c7b7b781f0df5e$var$swiper","$00c7b7b781f0df5e$var$windowWidth","documentElement","clientWidth","effect","grabCursor","navigation","nextEl","prevEl","param","destroy","contains"],"version":3,"file":"library.0fcd17c3.js.map"}