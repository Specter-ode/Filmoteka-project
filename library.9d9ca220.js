function e(e){return e&&e.__esModule?e.default:e}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},i={},n=a.parcelRequire37c5;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in i){var a=i[e];delete i[e];var n={id:e,exports:{}};return t[e]=n,a.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,a){i[e]=a},a.parcelRequire37c5=n),n("5MPmM"),n("7ol1T");var r=n("5MPmM"),s=n("38cRt");function o(e){return e.map((({title:a,original_title:t,name:i,original_name:n,poster_path:r,release_date:s,genres:o,vote_average:l,id:c})=>{const d=new Date(s),m=a||t||i||n,u=l.toString().padEnd(3,".0").slice(0,3);return e=`\n            <li class="movie-card gallery_item" data-id="${c}">\n              <img src="${r=r?`https://image.tmdb.org/t/p/w500/${r}`:"https://upload.wikimedia.org/wikipedia/commons/4/47/GarvaGriha_in_KaryaBinayak.jpg"}" alt="${m}" loading="lazy" class="movie-card__img" id="${c}"/>\n\n              <div class="movie-card__info">\n                <div class="movie-card__info-name-wraper"\n                  <p class="movie-card__info-name">${m.length<=31?m.toUpperCase():m.toUpperCase().slice(0,28)+"..."}\n                  </p>\n                </div>\n                <div class="movi-card__info-wraper">\n                  <div class="movi-card">\n                  <p class="movie-card__info-item">${function(e){if(0!==e.length)return e.length<3?e.map((e=>e.name)).join(", "):e.map((e=>e.name)).slice(0,2).join(", ")+"..."}(o)} | ${d.getFullYear()||""}\n                  </p>\n                  </div>\n                  <div class="card__rating">\n                    <p class="card__text card__rating--text">${u}</p>\n                  </div>\n                </div>\n              </div>\n            </li>\n          `})).join("")}var l=n("7ol1T");let c="queue";const d=new(0,s.MovieApi),m=document.querySelector('[data-action="watched"]'),u=document.querySelector('[data-action="queue"]');(async()=>{const e=(0,l.loadFromStorage)("queue")||[];if(0!==e.length)try{const a=(await g(e)).map((e=>e.data));r.refs.galleryLibrary.innerHTML=o(a)}catch(e){console.log(e.message)}else r.refs.galleryLibrary.innerHTML='<img src=\'https://upload.wikimedia.org/wikipedia/commons/4/47/GarvaGriha_in_KaryaBinayak.jpg\' alt="Sorry, you don\'t add movies at this list" loading="lazy" class="movie-card__img"/>'})();const p=async e=>{c=e.target.dataset.action,function(e,a){"watched"===e?(a.target.classList.add("active"),a.target.previousElementSibling.classList.remove("active")):(a.target.classList.add("active"),a.target.nextElementSibling.classList.remove("active"))}(c,e);const a=(0,l.loadFromStorage)(c)||[];if(0!==a.length)try{const e=(await g(a)).map((e=>e.data));r.refs.galleryLibrary.innerHTML=o(e)}catch(e){console.log(e.message)}else r.refs.galleryLibrary.innerHTML=""};function g(e){const a=e.map((async e=>(d.id=e,await d.fetchMovieById())));return Promise.all(a)}u.addEventListener("click",p),m.addEventListener("click",p),n("j8LgV");r=n("5MPmM"),s=n("38cRt"),l=n("7ol1T");const f=new(0,s.MovieApi);r.refs.modalContainer.addEventListener("click",(async e=>{const a=e.target.dataset.action;if(a!==c)return;const t=(0,l.loadFromStorage)(a)||[];if(0!==t.length)try{const e=await function(e){const a=e.map((async e=>(f.id=e,await f.fetchMovieById())));return Promise.all(a)}(t),a=e.map((e=>e.data));r.refs.galleryLibrary.innerHTML=o(a)}catch(e){console.log(e.message)}else r.refs.galleryLibrary.innerHTML=""}));s=n("38cRt"),r=n("5MPmM");var v=n("j8LgV");const y=({id:e,title:a,poster_path:t,popularity:i,original_title:n,vote_average:r,vote_count:s,genres:o,overview:l})=>{t=t?`https://image.tmdb.org/t/p/w500/${t}`:"https://upload.wikimedia.org/wikipedia/commons/4/47/GarvaGriha_in_KaryaBinayak.jpg",o=o.map((e=>e.name)).join(", "),i=parseFloat(i).toFixed(1);const c=a.toUpperCase(),d=n.toUpperCase();return`\n        <div class="image__place" id=${e}>\n        <button type="button" class="button__trailer js-trailer" name="trailer">\n        </button>\n          <img class="modal-poster" src="${t}" alt="${n}" />\n        </div>\n        <div class="content__place">\n            <h2 class="modal__header">${c}</h2>\n            <div class="details">\n                <ul class="details-head">\n                    <li class="details-string">Vote / Votes</li>\n                    <li class="details-string">Popularity</li>\n                    <li class="details-string">Original Title</li>\n                    <li class="details-string">Genre</li>\n                </ul>\n                <ul class="details-content">\n                    <li class="details-string"><span class="vote--modal">${r.toFixed(1)}</span> / ${s}</li>\n                    <li class="details-string">${i}</li>\n                    <li class="details-string">${d}</li>\n                    <li class="details-string">${o}</li>\n                </ul>\n            </div>\n            <h3>ABOUT</h3>\n            <p class="modal-annotation">\n                ${l}\n            </p>\n            <ul class="button__place">\n            <button type="button" class="film-modal__button film-modal__button--active" data-id="${e}" name="queue" data-action="queue">${(0,v.renderBtnQueueFromLocalStorage)(e)}</button>\n            <button type="button" class="film-modal__button " data-id="${e}" name="watched" data-action="watched">${(0,v.renderBtnWatchedFromLocalStorage)(e)}</button>\n            </ul>`};var h=n("9t6Mr"),_=n("9B8F0");const b=new(0,s.MovieApi);let L="";const w=async e=>{r.refs.loader.classList.remove("is-hidden"),r.refs.modalContainer.innerHTML="",b.id=e;try{const{data:e}=await b.fetchMovieById();r.refs.modalContainer.insertAdjacentHTML("beforeend",y(e)),r.refs.closeModalFilmBtn.addEventListener("click",k),setTimeout((()=>{document.querySelector(".js-trailer").addEventListener("click",M)}),0)}catch(e){console.log(e)}r.refs.modal.classList.remove("is-hidden"),r.refs.loader.classList.add("is-hidden")};const M=async()=>{try{const{data:e}=await b.fetchMovieByIdForTrailer();if(function(e){const{results:a}=e;a.forEach((e=>{e.name.includes("Official Trailer")&&(L=e.key)}))}(e),!L)return void(0,h.alertNoTrailer)()}catch(e){console.log(e)}_.create(`\n        <iframe src='https://www.youtube.com/embed/${L}'frameborder="0" allowfullscreen class="trailer_video" width="80%" height="80%"></iframe>`).show()};function k(){r.refs.modal.classList.add("is-hidden"),r.refs.backdrop.classList.add("is-hidden"),document.body.classList.remove("modal-is-open"),r.refs.modalContainer.innerHTML="",L="",r.refs.closeModalFilmBtn.removeEventListener("click",k)}r.refs.backdrop.addEventListener("click",(function(e){e.currentTarget===e.target&&k()})),document.addEventListener("keydown",(function(e){"Escape"===e.code&&k()})),r.refs.galleryLibrary.addEventListener("click",(e=>{e.preventDefault(),"IMG"===e.target.nodeName&&(r.refs.backdrop.classList.remove("is-hidden"),document.body.classList.add("modal-is-open"),w(e.target.id))})),n("fd231");var $=n("eWCmQ"),T=n("25RCP"),E=n("amyG6");(0,T.initializeApp)({apiKey:"AIzaSyBz5_WEoInvREC_39QfDZZZECl5U8Gjy9s",authDomain:"auth-film.firebaseapp.com",projectId:"auth-film",storageBucket:"auth-film.appspot.com",messagingSenderId:"298945320872",appId:"1:298945320872:web:2c146219caa9b256beef9d"});const j=(0,E.getAuth)();document.querySelector("[data-logout]").addEventListener("click",(function(a){a.preventDefault(),(0,E.signOut)(j).then((()=>{location.replace("https://specter-ode.github.io/Filmoteka-project/"),e($).Notify.warning("You are now successfully logged out!")})).catch((a=>{const t=a.code;e($).Notify.failure(t)}))}));
//# sourceMappingURL=library.9d9ca220.js.map
