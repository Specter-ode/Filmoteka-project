!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequire37c5;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequire37c5=r),r("lyT68"),r("1hEYs");var i=r("bpxeT"),o=r("2TvXO"),s=r("lyT68"),c=r("BRQVA"),l=r("iWKYE");function d(e){return e.map((function(t){var n=t.title,a=t.original_title,r=t.name,i=t.original_name,o=t.poster_path,s=t.release_date,c=t.genres,d=t.vote_average,u=t.id,p=new Date(s),f=n||a||r||i,m=d.toString().padEnd(3,".0").slice(0,3);return o=o?"https://image.tmdb.org/t/p/w500/".concat(o):"https://upload.wikimedia.org/wikipedia/commons/4/47/GarvaGriha_in_KaryaBinayak.jpg",e='\n            <li class="movie-card gallery_item" data-id="'.concat(u,'">\n              <img src="').concat(o,'" alt="').concat(f,'" loading="lazy" class="movie-card__img" id="').concat(u,'"/>\n\n              <div class="movie-card__info">\n                <div class="movie-card__info-name-wraper"\n                  <p class="movie-card__info-name">').concat(f.length<=31?f.toUpperCase():f.toUpperCase().slice(0,28)+"...",'\n                  </p>\n                </div>\n                <div class="movi-card__info-wraper">\n                  <div class="movi-card">\n                  <p class="movie-card__info-item">').concat((0,l.finalGenresForLibrary)(c)," | ").concat(p.getFullYear()||"",'\n                  </p>\n                  </div>\n                  <div class="card__rating">\n                    <p class="card__text card__rating--text">').concat(m,"</p>\n                  </div>\n                </div>\n              </div>\n            </li>\n          ")})).join("")}var u,p=r("1hEYs"),f="queue",m=new(0,c.MovieApi),v=document.querySelector('[data-action="watched"]'),g=document.querySelector('[data-action="queue"]'),h=(u=e(i)(e(o).mark((function t(){var n,a,r;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,p.loadFromStorage)("queue")||[],console.log(n),0!==n.length){e.next=5;break}return s.refs.galleryLibrary.innerHTML='<img src=\'https://upload.wikimedia.org/wikipedia/commons/4/47/GarvaGriha_in_KaryaBinayak.jpg\' alt="Sorry, you don\'t add movies at this list" loading="lazy" class="movie-card__img"/>',e.abrupt("return");case 5:return e.prev=5,e.next=8,b(n);case 8:a=e.sent,r=a.map((function(e){return e.data})),console.log(r),s.refs.galleryLibrary.innerHTML=d(r),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),console.log(e.t0.message);case 17:case"end":return e.stop()}}),t,null,[[5,14]])}))),function(){return u.apply(this,arguments)});h();var y=function(){var t=e(i)(e(o).mark((function t(n){var a,r,i;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_(f=n.target.dataset.action,n),console.log("choosenList: ",f),a=(0,p.loadFromStorage)(f)||[],console.log(a),0!==a.length){e.next=8;break}return s.refs.galleryLibrary.innerHTML="",e.abrupt("return");case 8:return e.prev=8,e.next=11,b(a);case 11:r=e.sent,i=r.map((function(e){return e.data})),console.log(i),s.refs.galleryLibrary.innerHTML=d(i),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(8),console.log(e.t0.message);case 20:case"end":return e.stop()}}),t,null,[[8,17]])})));return function(e){return t.apply(this,arguments)}}();function b(t){var n=t.map(function(){var t=e(i)(e(o).mark((function t(n){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.id=n,e.next=3,m.fetchMovieById();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return Promise.all(n)}function _(e,t){"watched"===e?(t.target.classList.add("active"),t.target.previousElementSibling.classList.remove("active")):(t.target.classList.add("active"),t.target.nextElementSibling.classList.remove("active"))}g.addEventListener("click",y),v.addEventListener("click",y),r("jLMai");i=r("bpxeT"),o=r("2TvXO"),s=r("lyT68"),c=r("BRQVA"),p=r("1hEYs");var w=new(0,c.MovieApi),L=function(){var t=e(i)(e(o).mark((function t(n){var a,r,i,c;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.target.dataset.action,console.log(f),console.log("e.target.dataset.action: ",n.target.dataset.action),a===f){e.next=5;break}return e.abrupt("return");case 5:if(r=(0,p.loadFromStorage)(a)||[],console.log(r),0!==r.length){e.next=10;break}return s.refs.galleryLibrary.innerHTML="",e.abrupt("return");case 10:return e.prev=10,e.next=13,k(r);case 13:i=e.sent,console.log(i),c=i.map((function(e){return e.data})),console.log(c),s.refs.galleryLibrary.innerHTML=d(c),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(10),console.log(e.t0.message);case 23:case"end":return e.stop()}}),t,null,[[10,20]])})));return function(e){return t.apply(this,arguments)}}();function k(e){return x.apply(this,arguments)}function x(){return x=e(i)(e(o).mark((function t(n){var a;return e(o).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.map(function(){var t=e(i)(e(o).mark((function t(n){var a;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.id=n,e.next=3,w.fetchMovieById();case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),console.log(a),t.next=4,Promise.all(a);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)}))),x.apply(this,arguments)}s.refs.modalContainer.addEventListener("click",L);i=r("bpxeT"),o=r("2TvXO"),c=r("BRQVA"),s=r("lyT68");var E=r("jLMai"),T=function(e){var t=e.id,n=e.title,a=e.poster_path,r=e.popularity,i=e.original_title,o=e.vote_average,s=e.vote_count,c=e.genres,l=e.overview;a=a?"https://image.tmdb.org/t/p/w500/".concat(a):"https://upload.wikimedia.org/wikipedia/commons/4/47/GarvaGriha_in_KaryaBinayak.jpg",c=c.map((function(e){return e.name})).join(", "),r=parseFloat(r).toFixed(1);var d=n.toUpperCase(),u=i.toUpperCase(),p=o.toFixed(1);return'\n        <div class="image__place" id='.concat(t,'>\n        <button type="button" class="button__trailer js-trailer" name="trailer">\n        </button>\n          <img class="modal-poster" src="').concat(a,'" alt="').concat(i,'" />\n        </div>\n        <div class="content__place">\n            <h2 class="modal__header">').concat(d,'</h2>\n            <div class="details">\n                <ul class="details-head">\n                    <li class="details-string">Vote / Votes</li>\n                    <li class="details-string">Popularity</li>\n                    <li class="details-string">Original Title</li>\n                    <li class="details-string">Genre</li>\n                </ul>\n                <ul class="details-content">\n                    <li class="details-string"><span class="vote--modal">').concat(p,"</span> / ").concat(s,'</li>\n                    <li class="details-string">').concat(r,'</li>\n                    <li class="details-string">').concat(u,'</li>\n                    <li class="details-string">').concat(c,'</li>\n                </ul>\n            </div>\n            <h3>ABOUT</h3>\n            <p class="modal-annotation">\n                ').concat(l,'\n            </p>\n            <ul class="button__place">\n            <button type="button" class="film-modal__button film-modal__button--active" data-id="').concat(t,'" name="queue" data-action="queue">').concat((0,E.renderBtnQueueFromLocalStorage)(t),'</button>\n            <button type="button" class="film-modal__button " data-id="').concat(t,'" name="watched" data-action="watched">').concat((0,E.renderBtnWatchedFromLocalStorage)(t),"</button>\n            </ul>")},M=r("1oqgH"),S=r("dyT35"),B=new(0,c.MovieApi),q="",F=function(){var t=e(i)(e(o).mark((function t(n){var a;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.refs.loader.classList.remove("is-hidden"),s.refs.modalContainer.innerHTML="",B.id=n,e.prev=3,e.next=6,B.fetchMovieById();case 6:a=e.sent.data,s.refs.modalContainer.insertAdjacentHTML("beforeend",T(a)),s.refs.closeModalFilmBtn.addEventListener("click",A),setTimeout((function(){document.querySelector(".js-trailer").addEventListener("click",C)}),0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0);case 15:s.refs.modal.classList.remove("is-hidden"),s.refs.loader.classList.add("is-hidden");case 17:case"end":return e.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}();function j(e){e.results.forEach((function(e){e.name.includes("Official Trailer")&&(q=e.key)}))}var C=function(){var t=e(i)(e(o).mark((function t(){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.fetchMovieByIdForTrailer();case 3:if(j(e.sent.data),q){e.next=8;break}return(0,M.alertNoTrailer)(),e.abrupt("return");case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:S.create("\n        <iframe src='https://www.youtube.com/embed/".concat(q,'\'frameborder="0" allowfullscreen class="trailer_video" width="80%" height="80%"></iframe>')).show();case 15:case"end":return e.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();function A(){s.refs.modal.classList.add("is-hidden"),s.refs.backdrop.classList.add("is-hidden"),document.body.classList.remove("modal-is-open"),s.refs.modalContainer.innerHTML="",q="",s.refs.closeModalFilmBtn.removeEventListener("click",A)}s.refs.backdrop.addEventListener("click",(function(e){e.currentTarget===e.target&&A()})),document.addEventListener("keydown",(function(e){"Escape"===e.code&&A()})),s.refs.galleryLibrary.addEventListener("click",(function(e){e.preventDefault(),"IMG"===e.target.nodeName&&(s.refs.backdrop.classList.remove("is-hidden"),document.body.classList.add("modal-is-open"),F(e.target.id))}));var G=r("6Bava"),I=document.querySelector(".footer__link"),H=document.querySelector(".team-backdrop"),O=document.querySelector("body"),U="",D=document.documentElement.clientWidth;I.addEventListener("click",(function(){H.classList.remove("is-hidden"),O.classList.add("stop-scroll"),D<1200?U=new(e(G))(".team-modal",{effect:"cards",grabCursor:!0}):D>=1200&&(U=new(e(G))(".team-modal",{effect:"flip",grabCursor:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}))})),H.addEventListener("click",(function(e){var t=e.target;"IMG"!==t.nodeName&&"swiper-button-next"!==t.classList[0]&&"swiper-button-prev"!==t.classList[0]&&(H.classList.add("is-hidden"),O.classList.remove("stop-scroll"),U.destroy(!0,!0))})),document.addEventListener("keydown",(function(e){if(!H.classList.contains("is-hidden")&&!H.classList.contains("is-hidden")){if("Escape"!==e.key)return;H.classList.add("is-hidden"),O.classList.remove("stop-scroll"),U.destroy(!0,!0)}}));var N=r("iU1Pc"),R=r("6Urw1"),Y=r("3SEMc"),z=((0,R.initializeApp)({apiKey:"AIzaSyBz5_WEoInvREC_39QfDZZZECl5U8Gjy9s",authDomain:"auth-film.firebaseapp.com",projectId:"auth-film",storageBucket:"auth-film.appspot.com",messagingSenderId:"298945320872",appId:"1:298945320872:web:2c146219caa9b256beef9d"}),(0,Y.getAuth)());document.querySelector("[data-logout]").addEventListener("click",(function(t){t.preventDefault(),(0,Y.signOut)(z).then((function(){location.replace("https://specter-ode.github.io/Filmoteka-project/"),e(N).Notify.warning("You are now successfully logged out!")})).catch((function(t){var n=t.code;e(N).Notify.failure(n)}))}))}();
//# sourceMappingURL=library.b0e49e53.js.map
