{"mappings":"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","sources":["src/library-index.js","src/script/onOperCardInLibrary.js","src/script/modal_developer-library.js"],"sourcesContent":["import './script/refs';\nimport './script/localStorage';\nimport './script/galleryInLibrary';\nimport './script/onClickAddToLibrary';\nimport './script/onOperCardInLibrary';\nimport './script/modal_developer-library';\n// import './script/auth-modal-library';\n","import { MovieApi } from './fetchFilms';\nimport { refs } from './refs';\nimport { movieCard } from './movieCard';\nimport { alertNoTrailer } from './alerts';\nimport * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/dist/basicLightbox.min.css';\n\nconst movieApi = new MovieApi();\nlet youtubeKey = '';\n\nconst createMarkup = async id => {\n  refs.loader.classList.remove('is-hidden');\n  clearCard();\n  movieApi.id = id;\n  try {\n    const { data } = await movieApi.fetchMovieById();\n\n    refs.modalContainer.insertAdjacentHTML('beforeend', movieCard(data));\n    refs.closeModalFilmBtn.addEventListener('click', closeModal);\n    setTimeout(() => {\n      const btnOpenTrailer = document.querySelector('.js-trailer');\n      btnOpenTrailer.addEventListener('click', onOpenTrailerModal);\n    }, 0);\n  } catch (err) {\n    console.log(err);\n  }\n\n  refs.modal.classList.remove('is-hidden');\n  refs.loader.classList.add('is-hidden');\n};\n\nconst onGalleryContainerClickInLibrary = e => {\n  e.preventDefault();\n  if (e.target.nodeName !== 'IMG') {\n    return;\n  }\n\n  refs.backdrop.classList.remove('is-hidden');\n  document.body.classList.add('modal-is-open');\n  createMarkup(e.target.id);\n};\n\nfunction createYoutubeUrl(data) {\n  const { results } = data;\n  results.forEach(obj => {\n    if (obj.name.includes('Official Trailer')) {\n      youtubeKey = obj.key;\n    }\n  });\n}\nconst onOpenTrailerModal = async () => {\n  try {\n    const { data } = await movieApi.fetchMovieByIdForTrailer();\n    createYoutubeUrl(data);\n    if (!youtubeKey) {\n      alertNoTrailer();\n      return;\n    }\n  } catch (err) {\n    console.log(err);\n  }\n\n  const openTrailer = basicLightbox.create(`\n        <iframe src='https://www.youtube.com/embed/${youtubeKey}'frameborder=\"0\" allowfullscreen class=\"trailer_video\" width=\"80%\" height=\"80%\"></iframe>`);\n  openTrailer.show();\n};\n\nfunction clearCard() {\n  refs.modalContainer.innerHTML = '';\n}\n\nfunction onClickBackdrop(event) {\n  if (event.currentTarget === event.target) {\n    closeModal();\n  }\n}\nfunction onClickEsc(event) {\n  if (event.code === 'Escape') {\n    closeModal();\n  }\n}\nfunction closeModal() {\n  refs.modal.classList.add('is-hidden');\n  refs.backdrop.classList.add('is-hidden');\n  document.body.classList.remove('modal-is-open');\n  refs.modalContainer.innerHTML = '';\n  youtubeKey = '';\n  refs.closeModalFilmBtn.removeEventListener('click', closeModal);\n}\n\nrefs.backdrop.addEventListener('click', onClickBackdrop);\ndocument.addEventListener('keydown', onClickEsc);\n\nrefs.galleryLibrary.addEventListener('click', onGalleryContainerClickInLibrary);\n","import Swiper from '/node_modules/swiper/swiper-bundle.min.js';\nimport '/node_modules/swiper/swiper-bundle.min.css';\n\nconst footerSpan = document.querySelector('.footer__link');\nconst backdrop = document.querySelector('.team-backdrop');\nconst body = document.querySelector('body');\n\nlet swiper = '';\nconst desktop = 1200;\nlet windowWidth = document.documentElement.clientWidth;\n\nfunction openModalHandle() {\n  backdrop.classList.remove('is-hidden');\n  body.classList.add('stop-scroll');\n\n  if (windowWidth < desktop) {\n    swiper = new Swiper('.team-modal', {\n      effect: 'cards',\n      grabCursor: true,\n    });\n    return;\n  }\n  if (windowWidth >= desktop) {\n    swiper = new Swiper('.team-modal', {\n      effect: 'flip',\n      grabCursor: true,\n      navigation: {\n        nextEl: '.swiper-button-next',\n        prevEl: '.swiper-button-prev',\n      },\n    });\n    return;\n  }\n}\n\nfunction closeModalHandle({ target }) {\n  if (\n    target.nodeName !== 'IMG' &&\n    target.classList[0] !== 'swiper-button-next' &&\n    target.classList[0] !== 'swiper-button-prev'\n  ) {\n    backdrop.classList.add('is-hidden');\n    body.classList.remove('stop-scroll');\n    swiper.destroy(true, true);\n  }\n}\n\nfunction escCloseHandle(e) {\n  if (backdrop.classList.contains('is-hidden')) {\n    return;\n  }\n  if (!backdrop.classList.contains('is-hidden')) {\n    if (e.key !== 'Escape') {\n      return;\n    }\n    backdrop.classList.add('is-hidden');\n    body.classList.remove('stop-scroll');\n    swiper.destroy(true, true);\n  }\n}\n\nfooterSpan.addEventListener('click', openModalHandle);\nbackdrop.addEventListener('click', closeModalHandle);\ndocument.addEventListener('keydown', escCloseHandle);\n"],"names":["parcelRequire","$38cRt","$108f32c0594c256b$var$movieApi","MovieApi","$108f32c0594c256b$var$youtubeKey","$108f32c0594c256b$var$createMarkup","async","id","$5MPmM","refs","loader","classList","remove","modalContainer","innerHTML","data","fetchMovieById","insertAdjacentHTML","$lN7l5","movieCard","closeModalFilmBtn","addEventListener","$108f32c0594c256b$var$closeModal","setTimeout","document","querySelector","$108f32c0594c256b$var$onOpenTrailerModal","err","console","log","modal","add","fetchMovieByIdForTrailer","results","forEach","obj","name","includes","key","$108f32c0594c256b$var$createYoutubeUrl","$9t6Mr","alertNoTrailer","$9B8F0","create","show","backdrop","body","removeEventListener","event","currentTarget","target","code","galleryLibrary","e","preventDefault","nodeName","$iUlH6","$f2f7eb58470f1896$var$footerSpan","$f2f7eb58470f1896$var$backdrop","$f2f7eb58470f1896$var$body","$f2f7eb58470f1896$var$swiper","$f2f7eb58470f1896$var$windowWidth","documentElement","clientWidth","$parcel$interopDefault","effect","grabCursor","navigation","nextEl","prevEl","destroy","contains"],"version":3,"file":"library.be2e5620.js.map"}